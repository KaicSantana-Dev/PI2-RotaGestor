generator client {
  provider      = "prisma-client-js"
  output        = "../generated/prisma"
  binaryTargets = ["native", "windows"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id    Int @id @default(autoincrement())
  Nome  String
  Senha String
  Email String
}

enum TipodeGasto {
  Combustivel
  Manutencao
}

model Carro {
  id      Int     @id @default(autoincrement())
  Modelo  String
  Placa   String
  Ano     Int
  Marca   String
  URL_Imagem String
  motoristaId Int @unique
  Motorista  Funcionario @relation(fields: [motoristaId], references: [id])
  GastosCombustivel  GastosCombustivel[] 
  GastosManutencao   GastosManutencao[]
}

model GastosCombustivel {
  id        Int   @id @default(autoincrement())
  carroId   Int
  Carro     Carro @relation(fields: [carroId], references: [id])
  Valor     Decimal
  Gasto     TipodeGasto
  Data      DateTime
  Posto     String
}

model GastosManutencao {
  id        Int   @id @default(autoincrement())
  carroId   Int
  Carro     Carro @relation(fields: [carroId], references: [id])
  Valor     Decimal
  Gasto     TipodeGasto
  Data      DateTime
  Local     String
}

enum Cargo {
  Gerente
  Motorista
  Administrador
}

model Funcionario {
  id        Int   @id @default(autoincrement())
  Nome      String
  CPF       String
  Email     String
  Cargo     Cargo
  Carro     Carro?
}

